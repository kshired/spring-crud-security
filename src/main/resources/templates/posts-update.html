<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div th:replace="fragments/header :: header"></div>

<h1>게시글</h1>

<div class="col-md-12">
  <div class="col-md-4">
    <form>
      <div class="form-group">
        <label for="title">글 번호</label>
        <input type="text" class="form-control" id="id" th:field="*{post.id}" readonly>
      </div>
      <div class="form-group">
        <label for="title">제목</label>
        <input type="text" class="form-control" id="title" th:field="*{post.title}" th:readonly="${#authentication.getName()} != *{post.author}">
      </div>
      <div class="form-group">
        <label for="author"> 작성자 </label>
        <input type="text" class="form-control" id="author" th:field="*{post.author}" readonly>
      </div>
      <div class="form-group">
        <label for="content"> 내용 </label>
        <textarea class="form-control" id="content" th:field="*{post.content}" th:readonly="${#authentication.getName()} != *{post.author}"></textarea>
      </div>
    </form>
    <form>
      <label for="comment">댓글</label>
      <input type="text" class="form-control" id="comment" sec:authorize="isAuthenticated()" />
      <button type="button" sec:authorize="isAuthenticated()" class="btn btn-primary" id="btn-comment">댓글작성</button>
      <table class="table table-horizontal table-bordered">
        <thead class="thead-strong">
        <tr>
          <th>댓글 작성자</th>
          <th>댓글 내용</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <tr th:each="comment: ${comments}">
          <td th:text="${comment.author}"></td>
          <td th:text="${comment.content}"></td>
        </tr>
        </tbody>
      </table>
    </form>
    <a href="/" role="button" class="btn btn-secondary">뒤로가기</a>
    <button type="button" sec:authorize="isAuthenticated()" th:if="${#authentication.getName()} == *{post.author}" class="btn btn-primary" id="btn-update">수정</button>
    <button type="button" sec:authorize="isAuthenticated()" th:if="${#authentication.getName()} == *{post.author}" class="btn btn-danger" id="btn-delete">삭제</button>
  </div>
</div>

<div th:replace="fragments/footer :: footer"></div>